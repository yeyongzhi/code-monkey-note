# js 执行上下文
## 什么是执行上下文
执行上下文（Execution Context）是JavaScript**代码被解析和执行时**所处的环境
每当 JavaScript 引擎开始执行一段可执行代码（如全局代码、函数调用、eval 等），就会为其创建一个执行上下文
可以理解为：执行上下文是js执行时候的**环境、容器**，它包含了代码执行所需的所有信息，如变量、函数、this 等

js中主要有三种执行上下文：
1. 全局执行上下文（Global Execution Context）
2. 函数执行上下文（Function Execution Context）
3. eval 执行上下文（Eval Execution Context）（不推荐使用）

## 全局执行上下文
### 什么时候创建的？
在**JavaScript脚本加载后、任何代码执行之前**，引擎会首先创建全局执行上下文
注意这里是**脚本加载后并且代码执行之前**
它在整个程序生命周期中只有一个，并且**最先被创建，最后被销毁**

那么众所周知，一个网页应用在加载的时候会加载很多的js脚本，无论加载多少个`<script>标签或JS文件`，都只存在一个全局执行上下文（Global Execution Context）。

> 一个网页（一个 JS 运行环境）只有一个全局执行上下文，所有脚本文件共享它.

例如：
```javascript
<script src="a.js"></script>
<script src="b.js"></script>
<script src="c.js"></script>
```
> 这些脚本文件**共享同一个全局作用域**，也共享同一个全局执行上下文。它们会被依次解析和执行，就像把所有代码拼接在一起一样。

- 对于上面的普通脚本（非模块脚本），直接在全局作用域中运行，变量可能会挂载到window中（var）
- 对于ES模块的脚本，各个文件有独立的作用域，但是仍然在同一个全局执行上下文中运行。

### 全局对象绑定
在浏览器环境中，全局执行上下文中的`this`指向`全局对象window`
在nodejs环境中，全局执行上下文中的`this`指向`全局对象global`